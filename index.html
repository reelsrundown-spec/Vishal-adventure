<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, orientation=landscape">
    <title>Vishal Adventure - Level 1</title>
    <style>
        body { margin: 0; padding: 0; overflow: hidden; background: #000; font-family: 'Arial', sans-serif; touch-action: none; }
        #game-container { position: relative; width: 100vw; height: 100vh; background: linear-gradient(#87CEEB, #a5f3fc); }
        canvas { display: block; width: 100%; height: 100%; }
        
        .hud { position: absolute; top: 20px; left: 20px; color: #ff4757; font-size: 24px; font-weight: bold; text-shadow: 2px 2px rgba(0,0,0,0.3); pointer-events: none; }
        
        .controls { position: absolute; bottom: 30px; width: 100%; display: flex; justify-content: space-between; padding: 0 40px; box-sizing: border-box; }
        .btn-group { display: flex; gap: 20px; }
        .action-btn { width: 80px; height: 80px; border-radius: 15px; background: rgba(0,0,0,0.6); border: 3px solid #fff; color: #fff; font-weight: bold; font-size: 14px; text-transform: uppercase; transition: 0.1s; }
        .action-btn:active { background: #ed4c67; transform: scale(0.9); border-color: #ed4c67; }
    </style>
</head>
<body>

<div id="game-container">
    <div class="hud" id="lifeCounter">❤️❤️❤️ LIFE</div>
    <canvas id="gameCanvas"></canvas>

    <div class="controls">
        <div class="btn-group">
            <button class="action-btn" id="leftBtn">Left</button>
            <button class="action-btn" id="rightBtn">Right</button>
        </div>
        <div class="btn-group">
            <button class="action-btn" id="jumpBtn">Jump</button>
            <button class="action-btn" id="downBtn">Down</button>
        </div>
    </div>
</div>

<script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    
    const heroSprite = new Image();
    heroSprite.src = 'hero_vishal.png'; 

    let player = { x: 80, y: 0, velocityY: 0, velocityX: 0, direction: 1 };
    let groundLevel;

    function init() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        groundLevel = canvas.height - 70;
        player.y = groundLevel;
    }

    function drawWorld() {
        ctx.fillStyle = "#2ecc71";
        ctx.beginPath();
        ctx.moveTo(0, canvas.height);
        ctx.lineTo(0, groundLevel);
        ctx.quadraticCurveTo(canvas.width/2, groundLevel - 240, canvas.width - 150, groundLevel);
        ctx.lineTo(canvas.width, groundLevel);
        ctx.lineTo(canvas.width, canvas.height);
        ctx.fill();

        const finishX = canvas.width - 100;
        ctx.fillStyle = "#000";
        ctx.fillRect(finishX, groundLevel - 15, 70, 15);
        ctx.fillStyle = "#fff";
        ctx.font = "bold 12px Arial";
        ctx.fillText("FINISH", finishX + 15, groundLevel - 20);
    }

    function drawHero() {
        ctx.save();
        ctx.translate(player.x, player.y);
        if(player.direction === -1) ctx.scale(-1, 1);
        
        if(Math.abs(player.velocityX) > 0.2) {
            ctx.drawImage(heroSprite, 80, 800, 150, 200, -30, -80, 60, 80);
        } else {
            ctx.drawImage(heroSprite, 250, 180, 500, 650, -40, -100, 80, 100);
        }
        ctx.restore();
    }

    function updatePhysics() {
        player.x += player.velocityX;
        player.y += player.velocityY;
        player.velocityX *= 0.85;

        let currentSlope = 0;
        if(player.x > 0 && player.x < canvas.width - 150) {
            currentSlope = Math.sin((player.x / (canvas.width - 150)) * Math.PI) * 190;
        }
        let dynamicGround = groundLevel - currentSlope;

        if(player.y < dynamicGround) {
            player.velocityY += 1.2;
        } else {
            player.velocityY = 0;
            player.y = dynamicGround;
        }

        if(player.x < 40) player.x = 40;
        
        if(player.x > canvas.width - 90) {
            alert("Level 1 Completed!");
            window.location.reload();
        }
    }

    function gameLoop() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        drawWorld();
        drawHero();
        updatePhysics();
        requestAnimationFrame(gameLoop);
    }

    function bindControls() {
        const handle = (id, action) => {
            const el = document.getElementById(id);
            el.addEventListener('touchstart', (e) => { e.preventDefault(); action(); });
            el.addEventListener('mousedown', action);
        };
        handle('leftBtn', () => { player.velocityX = -10; player.direction = -1; });
        handle('rightBtn', () => { player.velocityX = 10; player.direction = 1; });
        handle('jumpBtn', () => { if(player.velocityY === 0) player.velocityY = -20; });
    }

    window.onload = () => { init(); bindControls(); gameLoop(); };
    window.onresize = init;
</script>

</body>
</html>
